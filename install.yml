---
- hosts: app-servers
  gather_facts: false
  become: true
  tasks:
    - name: install tomcat
      package:
        name: tomcat8
    - name: start tomcat
      service:
        name: tomcat8
        enabled: true
        state: started
    - name: wait for tomcat
      wait_for:
        port: 8080
    - name: test url and port
      uri:
        url: http://127.0.0.1:8080
        timeout: 240